# meraki-discord-bot

Readme in progress, some info below - but not yet completed! Project is a work in progress, so please check back later for more updates.


### Description:

A quick bot to take in Meraki alerting webhooks via POST requests, then forward them to a desired Discord room.

### Why did you build this? 

Meraki allows you to specify a URL to send webhooks to - but unfortunately the data sent doesn't match up with what Discord requires for an incoming webhook.

So I needed to write an intermediary that would take in the alert webhooks from Meraki, then format them to include the required parameters expected by Discord. 

Since receiving a webhook requires a public-facing URL, I opted to use ngrok to generate ephemeral URLs & not have to permanantly host anything. This script will auto-update the Meraki Dashboard config with the current ngrok URL every time it starts.

I may add support for additional destinations later on, like Slack or WebEx. 


### Initial instructions:
 1. Install `pip install -r requirements.txt`
 2. Set environment variables (see below)
 3. Run `uvicorn meraki-discord-bot:app --reload`

 ### Environment Variables / Config

 Please note the values below may change

 | Variable Name 	| Required 	| Description 	| Example 	|
|-	|-	|-	|-	|
| MERAKI_TARGET_NETWORK_NAME 	| Yes 	| Name of the Meraki network to attach an alert webhook. 	| Home Office 	|
| MERAKI_TARGET_WEBHOOK_URL 	| No 	| URL for Meraki to send POST requests to. This is the externally facing URL of this bot.  Note: Right now this is overwritten by the ngrok auto-config - will be usable later. *MUST be https* 	| https://merakibot.local 	|
| MERAKI_API_KEY 	| Yes 	| API key to Meraki Dashboard, used to create/modify alerting webhook configuration 	| 1dc01da6a2e1asdfih4852e5d190asfnai4i533o434aaasdfasdf 	|
| MERAKI_WEBHOOK_NAME 	| No 	| Name to use when creating the webhook in Meraki. This is used to track which webhook is owned by this bot. By default, will use "api-generated_Discord" 	| api-generated_Discord 	|
| DISCORD_WEBHOOK_ID 	| Yes 	| Webhook ID generated by Discord to post messages 	| 0174891758902347510345 	|
| DISCORD_WEBHOOK_TOKEN 	| Yes 	| Webhook token generated by Discord to post messages 	| SADFJASDFN#$I#$M$#TOefosdfaJ(#KAFJSDFSADF 	|
